# uploader 設定ファイルサンプル
# このファイルを uploader.yaml にコピーして使用してください

_global:
  ignore_groups:
    common:
      - "**/.*" # dotfile
      - "**/.ignore_dir"
      - "**/.ignore_dir2"
  default_ignore:
    - common

# rsync
test_update:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      port: 2222
      protocol: "rsync"
      user: "testuser"
      auth_type: "ssh_key"
      key_file: "./tests/integration/fixtures/ssh-keys/test_key"
      rsync_path: "sudo rsync"
      rsync_options:
        - "--compress"
      sync_mode: "update"
    targets:
      - dest: "/upload/"

test_mirror:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      port: 2222
      protocol: "rsync"
      user: "testuser"
      auth_type: "ssh_key"
      key_file: "./tests/integration/fixtures/ssh-keys/test_key"
      rsync_path: "sudo rsync"
      rsync_options:
        - "--compress"
      sync_mode: "mirror"
    targets:
      - dest: "/upload/"

test_update_scp:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      port: 2222
      protocol: "scp"
      user: "testuser"
      auth_type: "ssh_key"
      key_file: "./tests/integration/fixtures/ssh-keys/test_key"
      sync_mode: "update"
    targets:
      - dest: "/upload/"

test_mirror_scp:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      port: 2222
      protocol: "scp"
      user: "testuser"
      auth_type: "ssh_key"
      key_file: "./tests/integration/fixtures/ssh-keys/test_key"
      sync_mode: "mirror"
    targets:
      - dest: "/upload/"

test_update_sftp:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      port: 2222
      protocol: "sftp"
      user: "testuser"
      auth_type: "ssh_key"
      key_file: "./tests/integration/fixtures/ssh-keys/test_key"
      sync_mode: "update"
    targets:
      - dest: "/upload/"

test_mirror_sftp:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      port: 2222
      protocol: "sftp"
      user: "testuser"
      auth_type: "ssh_key"
      key_file: "./tests/integration/fixtures/ssh-keys/test_key"
      sync_mode: "mirror"
    targets:
      - dest: "/upload/"

test_update_local:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      protocol: "local"
      sync_mode: "update"
    targets:
      - dest: "/tmp/upload/"

test_mirror_local:
  from:
    type: "file"
    src:
      - "./tests/integration/fixtures/testdata/local/example"
  to:
    defaults:
      host: "localhost"
      protocol: "local"
      sync_mode: "mirror"
    targets:
      - dest: "/tmp/upload/"